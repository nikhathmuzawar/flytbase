<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Drone Deconfliction System</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .upload-area {
            border: 2px dashed #dee2e6;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            margin-bottom: 10px;
        }
        .upload-area:hover {
            border-color: #007bff;
            background-color: #f8f9fa;
        }
        .upload-area.dragover {
            border-color: #28a745;
            background-color: #d4edda;
        }
        .plot-container {
            min-height: 400px;
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }
        .conflict-details-container {
            min-height: 400px;
            background-color: #fff;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            overflow-y: auto;
            max-height: 600px;
        }
        .loading { display: none; }
        .map-placeholder {
            background: linear-gradient(45deg, #f0f0f0 25%, transparent 25%), 
                        linear-gradient(-45deg, #f0f0f0 25%, transparent 25%), 
                        linear-gradient(45deg, transparent 75%, #f0f0f0 75%), 
                        linear-gradient(-45deg, transparent 75%, #f0f0f0 75%);
            background-size: 20px 20px;
            background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
        }
        .file-info { font-size: 0.9em; margin-top: 5px; }
        .plot-container img { max-width: 100%; height: auto; }
        .conflict-badge { font-size: 0.8em; }
        .time-input-group { margin-bottom: 15px; }
        .drone-section { 
            border: 1px solid #dee2e6; 
            border-radius: 8px; 
            padding: 15px; 
            margin-bottom: 20px;
            background-color: #fdfdfd;
        }
        .other-drone-item {
            border: 1px solid #e3f2fd;
            border-radius: 6px;
            padding: 12px;
            margin-bottom: 10px;
            background-color: #f8f9fa;
            position: relative;
        }
        .remove-drone-btn {
            position: absolute;
            top: 5px;
            right: 5px;
            width: 25px;
            height: 25px;
            padding: 0;
            font-size: 12px;
        }
        .conflict-card {
            border-left: 4px solid #dc3545;
            margin-bottom: 15px;
            background-color: #fff5f5;
        }
        .conflict-card.safe {
            border-left: 4px solid #28a745;
            background-color: #f0f8f0;
        }
        .metric-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
        }
        .metric-value {
            font-size: 2em;
            font-weight: bold;
        }
        .metric-label {
            font-size: 0.9em;
            opacity: 0.9;
        }
        .drone-conflict-summary {
            background-color: #fff;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
        }
        .severity-critical {
            background-color: #dc3545;
            color: white;
        }
        .severity-high {
            background-color: #fd7e14;
            color: white;
        }
        .severity-medium {
            background-color: #ffc107;
            color: black;
        }
        .severity-low {
            background-color: #28a745;
            color: white;
        }
    </style>
</head>
<body>
    <div class="container-fluid mt-4">
        <div class="row">
            <!-- Left Panel - Upload and Controls -->
            <div class="col-md-4">
                <div class="card">
                    <div class="card-header">
                        <h4><i class="fas fa-drone"></i> Drone Deconfliction System</h4>
                    </div>
                    <div class="card-body">
                        <form id="uploadForm">
                            <!-- Primary Drone Section -->
                            <div class="drone-section">
                                <h5 class="text-primary mb-3">Primary Drone Mission</h5>
                                
                                <!-- Primary Drone Upload -->
                                <div class="mb-3">
                                    <label class="form-label"><strong>Waypoint File</strong></label>
                                    <div class="upload-area" onclick="document.getElementById('primaryFile').click()">
                                        <i class="fas fa-upload fa-2x text-primary mb-2"></i>
                                        <div>Click to upload primary drone waypoints</div>
                                        <small class="text-muted">Format: QGC .waypoint, .txt, .csv</small>
                                    </div>
                                    <input type="file" id="primaryFile" accept=".waypoint,.txt,.csv" style="display: none;" required>
                                    <div id="primaryFileName" class="file-info"></div>
                                </div>

                                <!-- Primary Drone Time Settings -->
                                <div class="row time-input-group">
                                    <div class="col-6">
                                        <label class="form-label">Start Time</label>
                                        <input type="datetime-local" class="form-control" id="primaryStartTime" required>
                                    </div>
                                    <div class="col-6">
                                        <label class="form-label">End Time</label>
                                        <input type="datetime-local" class="form-control" id="primaryEndTime" required>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-12">
                                        <label class="form-label">Speed (m/s)</label>
                                        <input type="number" class="form-control" id="primarySpeed" value="10" min="1" max="50" step="0.1">
                                    </div>
                                </div>
                            </div>

                            <!-- Other Drones Section -->
                            <div class="drone-section">
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <h5 class="text-success mb-0">Other Drones</h5>
                                    <button type="button" class="btn btn-success btn-sm" id="addDroneBtn">
                                        <i class="fas fa-plus"></i> Add Drone
                                    </button>
                                </div>
                                
                                <div id="otherDronesContainer">
                                    <!-- Dynamic drone entries will be added here -->
                                </div>
                            </div>

                            <!-- Safety Settings -->
                            <div class="row mb-3">
                                <div class="col-12">
                                    <label class="form-label">Safety Buffer (m)</label>
                                    <input type="number" class="form-control" id="safetyBuffer" value="60" min="1" max="500">
                                </div>
                            </div>

                            <!-- Analyze Button -->
                            <button type="submit" class="btn btn-primary btn-lg w-100" id="analyzeBtn">
                                <i class="fas fa-search"></i> Analyze Conflicts
                            </button>
                        </form>

                        <!-- Loading Indicator -->
                        <div class="loading text-center mt-3">
                            <div class="spinner-border text-primary" role="status"></div>
                            <div class="mt-2">Analyzing drone paths...</div>
                        </div>

                        <!-- Results Summary -->
                        <div id="resultsSummary" class="mt-4" style="display: none;"></div>
                    </div>
                </div>
            </div>

            <!-- Right Panel - Visualizations -->
            <div class="col-md-8">
                <div class="row">
                    <!-- 2D Plot -->
                    

                    <!-- 3D Plot and Detailed Conflict Report -->
                    <div class="col-md-6 mb-4">
                        <div class="card">
                            <div class="card-header">
                                <h5><i class="fas fa-cube"></i> 3D Trajectory View</h5>
                            </div>
                            <div class="card-body">
                                <div id="plot3D" class="plot-container">
                                    <div class="text-muted text-center">
                                        <i class="fas fa-cube fa-3x mb-3"></i>
                                        <div>3D trajectory plots will appear here after analysis</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Detailed Conflict Report -->
                    <div class="col-md-6 mb-4">
                        <div class="card">
                            <div class="card-header">
                                <h5><i class="fas fa-exclamation-triangle"></i> Detailed Conflict Report</h5>
                            </div>
                            <div class="card-body p-2">
                                <div id="conflictDetails" class="conflict-details-container">
                                    <div class="text-muted text-center mt-5">
                                        <i class="fas fa-clipboard-list fa-3x mb-3"></i>
                                        <div>Detailed conflict analysis will appear here after analysis</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 mb-4">
                        <div class="card">
                            <div class="card-header">
                                <h5><i class="fas fa-chart-line"></i> 2D Trajectory View</h5>
                            </div>
                            <div class="card-body">
                                <div id="plot2D" class="plot-container">
                                    <div class="text-muted text-center">
                                        <i class="fas fa-chart-line fa-3x mb-3"></i>
                                        <div>2D trajectory plots will appear here after analysis</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Drone Deconfliction System Frontend JavaScript
        class DroneDeconflictionApp {
            constructor() {
                this.droneCounter = 0;
                this.setupEventListeners();
                this.setupFileHandlers();
                this.setDefaultTimes();
                this.addInitialDrone();
            }

            setDefaultTimes() {
                const now = new Date();
                const startTime = new Date(now.getTime() + 60000);
                const endTime = new Date(startTime.getTime() + 30 * 60000);
                
                document.getElementById('primaryStartTime').value = this.formatDateTimeLocal(startTime);
                document.getElementById('primaryEndTime').value = this.formatDateTimeLocal(endTime);
            }

            formatDateTimeLocal(date) {
                const year = date.getFullYear();
                const month = String(date.getMonth() + 1).padStart(2, '0');
                const day = String(date.getDate()).padStart(2, '0');
                const hours = String(date.getHours()).padStart(2, '0');
                const minutes = String(date.getMinutes()).padStart(2, '0');
                return `${year}-${month}-${day}T${hours}:${minutes}`;
            }

            setupEventListeners() {
                const form = document.getElementById('uploadForm');
                form.addEventListener('submit', this.handleSubmit.bind(this));
                
                document.getElementById('addDroneBtn').addEventListener('click', this.addDrone.bind(this));
            }

            setupFileHandlers() {
                const primaryFile = document.getElementById('primaryFile');
                primaryFile.addEventListener('change', (e) => {
                    this.displayFileName('primaryFileName', e.target.files[0]);
                });

                this.setupDragAndDrop();
            }

            addInitialDrone() {
                this.addDrone();
            }

            addDrone() {
                this.droneCounter++;
                const droneId = `drone_${this.droneCounter}`;
                
                const droneHtml = `
                    <div class="other-drone-item" data-drone-id="${droneId}">
                        <button type="button" class="btn btn-danger btn-sm remove-drone-btn" onclick="app.removeDrone('${droneId}')">
                            <i class="fas fa-times"></i>
                        </button>
                        <h6 class="text-success">Drone ${this.droneCounter}</h6>
                        
                        <!-- File Upload -->
                        <div class="mb-3">
                            <label class="form-label"><strong>Waypoint File</strong></label>
                            <div class="upload-area" onclick="document.getElementById('${droneId}_file').click()">
                                <i class="fas fa-upload text-success mb-1"></i>
                                <div><small>Click to upload waypoints</small></div>
                            </div>
                            <input type="file" id="${droneId}_file" accept=".waypoint,.txt,.csv" style="display: none;" required>
                            <div id="${droneId}_fileName" class="file-info"></div>
                        </div>

                        <!-- Time Settings -->
                        <div class="row mb-2">
                            <div class="col-6">
                                <label class="form-label"><small>Start Time</small></label>
                                <input type="datetime-local" class="form-control form-control-sm" id="${droneId}_startTime" required>
                            </div>
                            <div class="col-6">
                                <label class="form-label"><small>End Time</small></label>
                                <input type="datetime-local" class="form-control form-control-sm" id="${droneId}_endTime" required>
                            </div>
                        </div>

                        <!-- Speed -->
                        <div class="row">
                            <div class="col-12">
                                <label class="form-label"><small>Speed (m/s)</small></label>
                                <input type="number" class="form-control form-control-sm" id="${droneId}_speed" value="8" min="1" max="50" step="0.1">
                            </div>
                        </div>
                    </div>
                `;
                
                document.getElementById('otherDronesContainer').insertAdjacentHTML('beforeend', droneHtml);
                
                const now = new Date();
                const startTime = new Date(now.getTime() + 60000);
                const endTime = new Date(startTime.getTime() + 30 * 60000);
                
                document.getElementById(`${droneId}_startTime`).value = this.formatDateTimeLocal(startTime);
                document.getElementById(`${droneId}_endTime`).value = this.formatDateTimeLocal(endTime);
                
                document.getElementById(`${droneId}_file`).addEventListener('change', (e) => {
                    this.displayFileName(`${droneId}_fileName`, e.target.files[0]);
                });
            }

            removeDrone(droneId) {
                const droneElement = document.querySelector(`[data-drone-id="${droneId}"]`);
                if (droneElement) {
                    droneElement.remove();
                }
                
                const remainingDrones = document.querySelectorAll('.other-drone-item');
                if (remainingDrones.length === 0) {
                    this.addDrone();
                }
            }

            setupDragAndDrop() {
                // Placeholder for drag and drop functionality
            }

            displayFileName(elementId, file) {
                const element = document.getElementById(elementId);
                if (file) {
                    element.innerHTML = `<small class="text-success"><i class="fas fa-check-circle"></i> ${file.name}</small>`;
                } else {
                    element.innerHTML = '';
                }
            }

            async handleSubmit(e) {
                e.preventDefault();
                
                const primaryFile = document.getElementById('primaryFile').files[0];
                const primaryStartTime = document.getElementById('primaryStartTime').value;
                const primaryEndTime = document.getElementById('primaryEndTime').value;
                const primarySpeed = document.getElementById('primarySpeed').value;
                const safetyBuffer = document.getElementById('safetyBuffer').value;
                
                if (!primaryFile) {
                    alert('Please upload a primary drone waypoint file');
                    return;
                }
                
                if (!primaryStartTime || !primaryEndTime) {
                    alert('Please set start and end times for the primary drone');
                    return;
                }
                
                const otherDrones = [];
                const droneElements = document.querySelectorAll('.other-drone-item');
                
                for (let element of droneElements) {
                    const droneId = element.getAttribute('data-drone-id');
                    const file = document.getElementById(`${droneId}_file`).files[0];
                    const startTime = document.getElementById(`${droneId}_startTime`).value;
                    const endTime = document.getElementById(`${droneId}_endTime`).value;
                    const speed = document.getElementById(`${droneId}_speed`).value;
                    
                    if (!file || !startTime || !endTime) {
                        alert(`Please complete all fields for Drone ${droneId.split('_')[1]}`);
                        return;
                    }
                    
                    otherDrones.push({
                        id: droneId,
                        file: file,
                        startTime: startTime,
                        endTime: endTime,
                        speed: parseFloat(speed)
                    });
                }
                
                if (otherDrones.length === 0) {
                    alert('Please add at least one other drone');
                    return;
                }

                this.showLoading(true);
                this.clearResults();

                try {
                    const formData = new FormData();
                    formData.append('primary_file', primaryFile);
                    formData.append('primary_start_time', primaryStartTime);
                    formData.append('primary_end_time', primaryEndTime);
                    formData.append('primary_speed', primarySpeed);
                    formData.append('safety_buffer', safetyBuffer);
                    
                    otherDrones.forEach((drone, index) => {
                        formData.append('other_files', drone.file);
                        formData.append(`other_start_times`, drone.startTime);
                        formData.append(`other_end_times`, drone.endTime);
                        formData.append(`other_speeds`, drone.speed.toString());
                        formData.append(`other_drone_ids`, drone.id);
                    });

                    const response = await fetch('/analyze', {
                        method: 'POST',
                        body: formData
                    });

                    if (!response.ok) {
                        const errorData = await response.json();
                        throw new Error(errorData.detail || `HTTP error! status: ${response.status}`);
                    }

                    const result = await response.json();
                    this.displayResults(result);
                } catch (error) {
                    console.error('Error:', error);
                    this.showError('Analysis failed: ' + error.message);
                } finally {
                    this.showLoading(false);
                }
            }

            showLoading(show) {
                const loading = document.querySelector('.loading');
                const button = document.getElementById('analyzeBtn');
                
                if (show) {
                    loading.style.display = 'block';
                    button.disabled = true;
                    button.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Analyzing...';
                } else {
                    loading.style.display = 'none';
                    button.disabled = false;
                    button.innerHTML = '<i class="fas fa-search"></i> Analyze Conflicts';
                }
            }

            clearResults() {
                document.getElementById('resultsSummary').style.display = 'none';
                document.getElementById('plot2D').innerHTML = `
                    <div class="text-muted text-center">
                        <i class="fas fa-chart-line fa-3x mb-3"></i>
                        <div>2D trajectory plots will appear here after analysis</div>
                    </div>`;
                document.getElementById('plot3D').innerHTML = `
                    <div class="text-muted text-center">
                        <i class="fas fa-cube fa-3x mb-3"></i>
                        <div>3D trajectory plots will appear here after analysis</div>
                    </div>`;
                document.getElementById('conflictDetails').innerHTML = `
                    <div class="text-muted text-center mt-5">
                        <i class="fas fa-clipboard-list fa-3x mb-3"></i>
                        <div>Detailed conflict analysis will appear here after analysis</div>
                    </div>`;
            }

            displayResults(result) {
                this.displayConflictSummary(result.conflict_report, result.system_info);
                this.displayDetailedConflicts(result.conflict_report, result.system_info);
                this.displayPlots(result.plots);
            }

            displayConflictSummary(report, systemInfo) {
                const summaryDiv = document.getElementById('resultsSummary');
                let html = '<div class="card">';
                html += '<div class="card-header"><h5><i class="fas fa-exclamation-triangle"></i> Analysis Results</h5></div>';
                html += '<div class="card-body">';

                html += `<div class="row mb-3">
                    <div class="col-4 text-center">
                        <div class="badge bg-primary fs-6">${systemInfo.total_drones}</div>
                        <div><small>Total Drones</small></div>
                    </div>
                    <div class="col-4 text-center">
                        <div class="badge bg-info fs-6">${systemInfo.safety_buffer}m</div>
                        <div><small>Safety Buffer</small></div>
                    </div>
                    <div class="col-4 text-center">
                        <div class="badge bg-secondary fs-6">${systemInfo.analysis_duration}</div>
                        <div><small>Duration</small></div>
                    </div>
                </div>`;

                if (report.status === 'clear') {
                    html += '<div class="alert alert-success"><i class="fas fa-check-circle"></i> <strong>All Clear!</strong> No conflicts detected.</div>';
                } else {
                    html += `<div class="alert alert-danger">
                        <i class="fas fa-exclamation-triangle"></i> <strong>Conflicts Detected!</strong><br>
                        Total conflicts: ${report.total_conflicts}<br>
                        Conflicting drones: ${report.conflicting_drones}
                    </div>`;

                    if (report.summary) {
                        html += '<h6>Conflict Summary:</h6>';
                        for (const [droneId, summary] of Object.entries(report.summary)) {
                            html += `<div class="mb-2">
                                <span class="badge bg-danger conflict-badge">${droneId}</span>
                                ${summary.count} conflicts, min distance: ${summary.min_distance.toFixed(2)}m
                            </div>`;
                        }
                    }
                }

                html += '</div></div>';
                summaryDiv.innerHTML = html;
                summaryDiv.style.display = 'block';
            }

            displayDetailedConflicts(report, systemInfo) {
                const detailsDiv = document.getElementById('conflictDetails');
                
                if (report.status === 'clear') {
                    detailsDiv.innerHTML = `
                        <div class="text-center mt-5">
                            <i class="fas fa-check-circle text-success" style="font-size: 4em;"></i>
                            <h4 class="mt-3 text-success">All Clear!</h4>
                            <p class="text-muted">No conflicts detected in the airspace</p>
                            <div class="metric-box" style="background: linear-gradient(135deg, #28a745 0%, #20c997 100%);">
                                <div class="metric-value">0</div>
                                <div class="metric-label">Total Conflicts</div>
                            </div>
                        </div>
                    `;
                    return;
                }

                let html = '';
                
                // Overall metrics
                html += '<div class="row mb-3">';
                html += `
                    <div class="col-6 mb-2">
                        <div class="metric-box" style="background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);">
                            <div class="metric-value">${report.total_conflicts}</div>
                            <div class="metric-label">Total Conflicts</div>
                        </div>
                    </div>
                    <div class="col-6 mb-2">
                        <div class="metric-box" style="background: linear-gradient(135deg, #fd7e14 0%, #e8590c 100%);">
                            <div class="metric-value">${report.conflicting_drones}</div>
                            <div class="metric-label">Drones Involved</div>
                        </div>
                    </div>
                `;
                html += '</div>';

                // Per-drone detailed analysis
                if (report.detailed_summary && report.detailed_summary.length > 0) {
                    html += '<h6 class="mb-3"><i class="fas fa-list"></i> Per-Drone Analysis</h6>';
                    
                    report.detailed_summary.forEach((drone, index) => {
                        const severityClass = this.getSeverityClass(drone.min_distance, systemInfo.safety_buffer);
                        const severityLabel = this.getSeverityLabel(drone.min_distance, systemInfo.safety_buffer);
                        
                        html += `
                            <div class="drone-conflict-summary">
                                <div class="d-flex justify-content-between align-items-start mb-2">
                                    <h6 class="mb-0"><i class="fas fa-drone"></i> ${drone.drone_id}</h6>
                                    <span class="badge ${severityClass}">${severityLabel}</span>
                                </div>
                                <div class="row mt-2">
                                    <div class="col-6">
                                        <small class="text-muted">Total Conflicts</small>
                                        <div class="fw-bold">${drone.total_conflicts}</div>
                                    </div>
                                    <div class="col-6">
                                        <small class="text-muted">Min Distance</small>
                                        <div class="fw-bold text-danger">${drone.min_distance.toFixed(2)}m</div>
                                    </div>
                                </div>
                                <div class="row mt-2">
                                    <div class="col-6">
                                        <small class="text-muted">Avg Distance</small>
                                        <div class="fw-bold">${drone.avg_distance.toFixed(2)}m</div>
                                    </div>
                                    <div class="col-6">
                                        <small class="text-muted">Max Distance</small>
                                        <div class="fw-bold">${drone.max_distance.toFixed(2)}m</div>
                                    </div>
                                </div>
                                <div class="mt-2">
                                    <small class="text-muted">First Conflict</small>
                                    <div style="font-size: 0.85em;">${this.formatDateTime(drone.first_conflict)}</div>
                                </div>
                                <div class="mt-1">
                                    <small class="text-muted">Last Conflict</small>
                                    <div style="font-size: 0.85em;">${this.formatDateTime(drone.last_conflict)}</div>
                                </div>
                                <div class="mt-2">
                                    <small class="text-muted">Conflict Duration</small>
                                    <div class="fw-bold">${this.formatDuration(drone.duration_seconds)}</div>
                                </div>
                            </div>
                        `;
                    });
                }

                detailsDiv.innerHTML = html;
            }

            getSeverityClass(distance, safetyBuffer) {
                const ratio = distance / safetyBuffer;
                if (ratio < 0.25) return 'severity-critical';
                if (ratio < 0.5) return 'severity-high';
                if (ratio < 0.75) return 'severity-medium';
                return 'severity-low';
            }

            getSeverityLabel(distance, safetyBuffer) {
                const ratio = distance / safetyBuffer;
                if (ratio < 0.25) return 'CRITICAL';
                if (ratio < 0.5) return 'HIGH';
                if (ratio < 0.75) return 'MEDIUM';
                return 'LOW';
            }

            formatDateTime(isoString) {
                if (!isoString) return 'N/A';
                const date = new Date(isoString);
                return date.toLocaleString();
            }

            formatDuration(seconds) {
                if (seconds < 60) return `${seconds.toFixed(0)}s`;
                const minutes = Math.floor(seconds / 60);
                const remainingSeconds = Math.floor(seconds % 60);
                return `${minutes}m ${remainingSeconds}s`;
            }

            displayPlots(plots) {
                document.getElementById('plot2D').innerHTML = 
                    `<img src="${plots.plot_2d}" class="img-fluid" alt="2D Trajectory Plot">`;
                
                document.getElementById('plot3D').innerHTML = 
                    `<img src="${plots.plot_3d}" class="img-fluid" alt="3D Trajectory Plot">`;
            }

            showError(message) {
                const summaryDiv = document.getElementById('resultsSummary');
                summaryDiv.innerHTML = `
                    <div class="alert alert-danger">
                        <i class="fas fa-exclamation-circle"></i> <strong>Error:</strong> ${message}
                    </div>`;
                summaryDiv.style.display = 'block';
            }
        }

        let app;
        document.addEventListener('DOMContentLoaded', () => {
            app = new DroneDeconflictionApp();
        });
    </script>
</body>
</html>